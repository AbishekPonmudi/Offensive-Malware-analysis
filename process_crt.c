
#include<windows.h>
#include<stdio.h>
#include<tchar.h>

using namespace std;

int WINAPI MessageBoxFunction(){
    MessageBox(NULL,_T("Process created sucessfully"),_T("Notification"),SLE_WARNING);
    return 0;
}

int WINAPI _tWinMain(HINSTANCE hInstance , HINSTANCE hPrevinstance , LPSTR lpCmdLine , int nShowCmd){
    MessageBox(NULL,_T("Process injected"),_T("Notification"),MB_OK);
    return 0;
}

int main(int argc, char* argv[]){
    PROCESS_INFORMATION prinfo;
    STARTUPINFO stinfo;
    ZeroMemory(&prinfo, sizeof(prinfo));
    ZeroMemory(&stinfo ,sizeof(stinfo));

    stinfo.cb = sizeof(stinfo);

    if(argc != 2){
        printf("Process usage: %s",argv[0]);
        return 1;
    }
    if (!CreateProcess(NULL,argv[1],NULL,NULL,FALSE,0,NULL,NULL,&stinfo,&prinfo))
    {
     printf("Falsed to create the process. Error: %lu\n",GetLastError());
     return 1;
    }
        MessageBoxFunction();
        printf("Process created sucessfully\nPID : %lu",prinfo.dwProcessId);

        CloseHandle(prinfo.hProcess);
        CloseHandle(prinfo.hThread);
    
    return 0;
}